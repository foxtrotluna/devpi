<metal:head define-macro="head">
    <metal:macros use-macro="macros.render_group('html_head')" />
</metal:head>
<metal:search define-macro="search">
    <form method="get" id="search" action="${request.route_url('search')}">
        <metal:logo use-macro="macros.logo" />
        <input type="text" size="60" name="query" autofocus tal:attributes="value query|None" />
        <input type="submit" value="Search" />
        <span class="help">
            <a href="${request.route_url('search_help')}">How to<br /> search?</a>
        </span>
        <div class="query_doc inline" style="display: none">
            <span class="help">
                <a href="#">Close help</a>
            </span>
            <metal:query_doc use-macro="macros.query_doc" />
        </div>
    </form>
    <script type="text/javascript">
    //<![CDATA[
        $(function() {
            $('.help a').click(function() {
                var $help = $('.query_doc.inline');
                // is there a docview iframe?
                var $iframe = $('iframe');
                if ($iframe.length && $help.is(':hidden')) {
                    // then hide the iframe's scrollbar
                    // (double scrollbar doesn't look nice)
                    $('body', $iframe[0].contentWindow.document
                      ).css('overflow', 'hidden');
                }
                $help.slideToggle({
                    complete: function () {
                        if ($iframe.length && $help.is(':hidden')) {
                            // give focus and scrollbar back to iframe
                            var iframeWindow = $iframe[0].contentWindow;
                            iframeWindow.focus();
                            $('body', iframeWindow.document
                              ).css('overflow', 'auto');
                        }
                    }
                });
                return false;
            });
        });
    //]]>
    </script>
</metal:search>
<metal:search define-macro="navigation">
    <div class="header">
        <metal:search use-macro="request.macros['search']" />
        <div id="navigation">
            <span tal:repeat="part request.navigation_info.path">
                <a href="${part.url}">${part.title}</a>
            </span>
            <metal:statusbadge use-macro="macros.status_badge" />
        </div>
        <metal:headerstatus use-macro="macros.header_status" />
        <metal:endofheader define-slot="endofheader" />
    </div>
</metal:search>
<metal:rootaboveuserindexlist define-macro="rootaboveuserindexlist">
</metal:rootaboveuserindexlist>
<metal:rootbelowuserindexlist define-macro="rootbelowuserindexlist">
</metal:rootbelowuserindexlist>
